<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIKE AIR 3D | Interactive Story</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
            transition: background 0.5s;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            letter-spacing: 3px;
        }

        .logo span {
            color: #ff0000;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            margin-left: 30px;
            font-weight: 600;
            transition: 0.3s;
        }

        nav a:hover {
            color: #ff0000;
        }

        /* Story Sections */
        .scene {
            height: 100vh;
            width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* 3D Shoe Container */
        #shoe-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* Scene 1: Shoe Falling */
        #scene-1 {
            background: linear-gradient(to bottom, #000000, #1a1a2e);
        }

        /* Scene 2: Lace Tightening */
        #scene-2 {
            background: #000;
        }

        .lace-tightening {
            position: relative;
            width: 500px;
            height: 500px;
        }

        /* Scene 3: Studio Lighting */
        #scene-3 {
            background: #111;
        }

        .studio-light {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.8) 70%);
        }

        /* Scene 4: Color Change */
        #scene-4 {
            background: #000;
        }

        .color-options {
            position: absolute;
            bottom: 50px;
            display: flex;
            gap: 15px;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #fff;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .color-btn:hover {
            transform: scale(1.2);
        }

        /* Scene 5: Packaging */
        #scene-5 {
            background: #000;
        }

        .nike-box {
            width: 400px;
            height: 300px;
            background: #111;
            border: 2px solid #ff0000;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
        }

        .nike-logo {
            width: 150px;
            height: 50px;
            background: url('https://i.imgur.com/JQJ8Q9W.png') center/contain no-repeat;
        }

        /* Footer */
        footer {
            padding: 50px 10%;
            text-align: center;
            background: #111;
        }

        .buy-now-btn {
            background: #ff0000;
            color: #fff;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 30px;
        }

        .buy-now-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 0, 0, 0.3);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo {
                font-size: 1.8rem;
            }
            
            nav a {
                margin-left: 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">NIKE <span>AIR</span></div>
        <nav>
            <a href="#scene-1">Story</a>
            <a href="#scene-4">Colors</a>
            <a href="#scene-5">Box</a>
        </nav>
    </header>

    <!-- 3D Shoe Container -->
    <div id="shoe-container"></div>

    <!-- Story Sections -->
    <section class="scene" id="scene-1">
        <h1>THE LEGENDARY NIKE AIR</h1>
    </section>

    <section class="scene" id="scene-2">
        <div class="lace-tightening">
            <h2>PERFECT FIT TECHNOLOGY</h2>
        </div>
    </section>

    <section class="scene" id="scene-3">
        <div class="studio-light"></div>
        <h2>STUDIO QUALITY CRAFT</h2>
    </section>

    <section class="scene" id="scene-4">
        <div class="color-options">
            <div class="color-btn" style="background: #ff0000;" data-color="#ff0000"></div>
            <div class="color-btn" style="background: #0000ff;" data-color="#0000ff"></div>
            <div class="color-btn" style="background: #00ff00;" data-color="#00ff00"></div>
            <div class="color-btn" style="background: #ffff00;" data-color="#ffff00"></div>
            <div class="color-btn" style="background: #ff00ff;" data-color="#ff00ff"></div>
        </div>
    </section>

    <section class="scene" id="scene-5">
        <div class="nike-box">
            <div class="nike-logo"></div>
        </div>
    </section>

    <footer>
        <button class="buy-now-btn">BUY NOW - $499</button>
    </footer>

    <script>
        // Three.js 3D Shoe
        let scene, camera, renderer, shoe;
        const container = document.getElementById('shoe-container');

        // Init Three.js
        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // Load 3D Shoe Model
            const loader = new THREE.GLTFLoader();
            loader.load(
                'https://cdn.jsdelivr.net/gh/mrdoob/three.js@dev/examples/models/gltf/Shoe/glTF/Shoe.gltf',
                function (gltf) {
                    shoe = gltf.scene;
                    shoe.scale.set(2, 2, 2);
                    scene.add(shoe);
                },
                undefined,
                function (error) {
                    console.error('Error loading 3D model:', error);
                }
            );

            // Lighting
            const light = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(light);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(0, 1, 1);
            scene.add(directionalLight);

            // Animation Loop
            function animate() {
                requestAnimationFrame(animate);
                if (shoe) shoe.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();

            // Handle Window Resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        init();

        // GSAP Scroll Animations
        gsap.registerPlugin(ScrollTrigger);

        // Scene 1: Shoe Falling
        gsap.from(shoe.position, {
            scrollTrigger: {
                trigger: "#scene-1",
                start: "top top",
                end: "bottom top",
                scrub: true
            },
            y: 10,
            z: 10
        });

        // Scene 2: Lace Tightening (Simulated)
        gsap.to(".lace-tightening", {
            scrollTrigger: {
                trigger: "#scene-2",
                start: "top center",
                end: "bottom center",
                scrub: true
            },
            scale: 1.2,
            opacity: 1
        });

        // Scene 3: Studio Light Effect
        gsap.to(".studio-light", {
            scrollTrigger: {
                trigger: "#scene-3",
                start: "top center",
                end: "bottom center",
                scrub: true
            },
            opacity: 0.8
        });

        // Scene 4: Color Change
        const colorBtns = document.querySelectorAll('.color-btn');
        colorBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const color = btn.getAttribute('data-color');
                document.body.style.background = color;
                gsap.to("header", { background: `rgba(${hexToRgb(color)}, 0.7)` });
            });
        });

        // Scene 5: Packaging
        gsap.to(".nike-box", {
            scrollTrigger: {
                trigger: "#scene-5",
                start: "top center",
                end: "bottom center",
                scrub: true
            },
            opacity: 1,
            y: -50
        });

        // Helper: Hex to RGB
        function hexToRgb(hex) {
            hex = hex.replace('#', '');
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            return `${r}, ${g}, ${b}`;
        }
    </script>
</body>
</html>